<div class="locations">
  <% @locations.each do |l| %>
    <div class="location" data-address="<%= l.address || '' %>" data-lat="<%= l.lat %>" data-lng="<%= l.lng %>">
      Address <%= l.address %>
    </div>
  <% end %>
</div>

<% if current_user.id == params[:id] %>
  <%= form_for(@location) do |f| %>
    <%= render 'shared/errors', object: f.object %>
    <div class="form-controls">
      Enter a Location <%= f.text_field :address %>
    </div>
    <%= f.hidden_field :street %>
    <%= f.hidden_field :city %>
    <%= f.hidden_field :country %>
    <%= f.hidden_field :postal_code %>
    <%= f.hidden_field :lat %>
    <%= f.hidden_field :lng %>
    <%= f.fields_for :location_users do |l| %>
      <div class="form-controls">
        <%= l.label :is_public, "Make Public" %>
        <%= l.check_box :is_public %>
      </div>
    <% end %>
    <%= f.submit %>
  <% end %>
<% end %>

<div class="map-container">
  <div id="map"></div>
</div>

<script>
 $(function() {
  G.loadUserLocation();
  G.showMarkersOnMap();
 });
</script>
